<!DOCTYPE html>
<html>
<head>
    <title>Grade Impact Calculator</title>
</head>
<body>

<h2>Grade Impact Calculator</h2>

<button onclick="run()">Simulate Assignment</button>

<p id="output"></p>

<script>
async function run() {
    const response = await fetch("/api/simulate", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            sectionName: "Tests",
            newEarned: 90,
            newPossible: 100,
            course: {
                sections: [
                    {
                        name: "Tests",
                        weight: 0.6,
                        assignments: [
                            { earned: 80, possible: 100 },
                            { earned: 85, possible: 100 }
                        ]
                    },
                    {
                        name: "Homework",
                        weight: 0.4,
                        assignments: [
                            { earned: 100, possible: 100 }
                        ]
                    }
                ]
            }
        })
    });

    const data = await response.json();
    document.getElementById("output").innerText =
        `Old: ${(data.oldGrade*100).toFixed(2)}%
New: ${(data.newGrade*100).toFixed(2)}%
Change: ${(data.change*100).toFixed(2)}%`;
}
</script>

</body>
</html>
